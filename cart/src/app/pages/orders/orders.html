<div class="orders-container">
  <h2>My Orders</h2>

  <div *ngIf="orders.length === 0" class="no-orders">
    <p>No orders found.</p>
  </div>

  <div *ngFor="let order of orders" class="order-card">
    <div class="order-header">
      <div class="order-id">Order #{{ order._id.$oid }}</div>
      <span class="status" [ngClass]="'status-' + order.status.toLowerCase()">
        {{ order.status }}
      </span>
    </div>

    <div class="order-products">
      <div *ngFor="let product of order.products" class="product-item">
        <div class="product-info">
          <span class="product-name">{{ product.productName }}</span>
          <span class="product-quantity">x {{ product.quantity }}</span>
        </div>
        <div class="product-price">${{ product.price * product.quantity }}</div>
      </div>
    </div>

    <div class="order-footer">
      <div class="order-info">
        <div class="date">Ordered on: {{ order.createdAt.$date | date : 'medium' }}</div>
        <div class="total-price">Total: ${{ order.totalPrice }}</div>
      </div>
      <button
        *ngIf="order.status === 'pending'"
        class="confirm-button"
        (click)="confirmOrder(order._id)"
        [disabled]="processingOrders.has(order._id.$oid)"
        [class.processing]="processingOrders.has(order._id.$oid)"
      >
        <i class="fas fa-check"></i>
        {{ processingOrders.has(order._id.$oid) ? 'Confirming...' : 'Confirm Order' }}
      </button>
    </div>
  </div>
</div>
