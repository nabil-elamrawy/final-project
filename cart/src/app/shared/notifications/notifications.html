<div class="notifications-wrapper">
  <div class="notification-icon" (click)="toggleNotifications()">
    <i class="fas fa-bell"></i>
    @if (notificationService.unreadCount$ | async) {
    <span class="notification-count">
      {{ notificationService.unreadCount$ | async }}
    </span>
    }
  </div>

  @if (showNotifications) {
  <div class="notifications-dropdown">
    <div class="notification-header">
      <h3>Notifications</h3>
      <button class="clear-all" (click)="clearAll()">Clear All</button>
    </div>
    <ul class="notification-list">
      @for (notification of notificationService.notifications$ | async; track notification.id) {
      <li
        class="notification-item"
        [class.unread]="!notification.isRead"
        (click)="markAsRead(notification.id)"
      >
        <p class="notification-content">{{ notification.message }}</p>
        <p class="notification-time">{{ notification.createdAt | date : 'short' }}</p>
      </li>
      } @empty {
      <li class="notification-item">
        <p class="notification-content">No notifications</p>
      </li>
      }
    </ul>
  </div>
  }
</div>
